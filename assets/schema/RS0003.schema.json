{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Fan Assembly",
  "description": "Schema for ASHRAE 205 annex RS0003: Fan Assembly",
  "definitions": {
    "PerformanceMapType": {
      "type": "string",
      "enum": [
        "DISCRETE",
        "CONTINUOUS"
      ],
      "enum_text": [
        "Discrete",
        "Continuous"
      ],
      "descriptions": [
        "Fan assemblies that can operate at one of a defined set of speeds",
        "Fan assemblies that can operate at any point within a continuous range of speeds"
      ],
      "notes": [
        "Data for this performance map type is provided at individual impeller speeds",
        "Data for this performance map type is provided in a continuous range of impeller speeds"
      ]
    },
    "SpeedControlType": {
      "type": "string",
      "enum": [
        "FIXED",
        "VARIABLE"
      ],
      "enum_text": [
        "Fixed",
        "Variable"
      ],
      "descriptions": [
        "Fan speed cannot change after installation",
        "Fan speed can change depending on operation after installation"
      ]
    },
    "ImpellerType": {
      "type": "string",
      "enum": [
        "CENTRIFUGAL_FORWARD_CURVED",
        "CENTRIFUGAL_BACKWARD_CURVED",
        "CENTRIFUGAL_AIR_FOIL",
        "AXIAL",
        "PROPELLER"
      ],
      "enum_text": [
        "Centrifugal Forward Curved",
        "Centrifugal Backward Curved",
        "Centrifugal Air Foil",
        "Axial",
        "Propeller"
      ],
      "descriptions": [
        "Forward curved fan impeller",
        "Backward curved or inclined fan impeller",
        "Air foil impeller with shaped blades",
        "Fan impeller with shaft parallel to air flow stream for high static applications",
        "Fan impeller with shaft parallel to air flow stream for low static pressure applications"
      ],
      "notes": [
        "Consistent with ASHRAE standard terminology",
        "",
        "",
        "",
        ""
      ]
    },
    "ComponentType": {
      "type": "string",
      "enum": [
        "COIL",
        "FURNACE",
        "FILTER",
        "HEAT_EXCHANGER",
        "ELECTRIC_RESISTANCE_ELEMENT",
        "OTHER"
      ],
      "enum_text": [
        "Coil",
        "Furnace",
        "Filter",
        "Heat Exchanger",
        "Electric Resistance Element",
        "Other"
      ],
      "descriptions": [
        "Finned coil in cross-flow arrangement",
        "Fuel-fired heating section",
        "Air filters",
        "Additional heat exchanger",
        "Electric resistance heater elements",
        "Additional components in air stream"
      ],
      "notes": [
        "",
        "",
        "",
        "e.g., an air-to-air heat exchanger",
        "",
        ""
      ]
    },
    "RS0003": {
      "type": "object",
      "properties": {
        "description": {
          "description": "Data group describing product and rating information",
          "$ref": "RS0003.schema.json#/definitions/Description"
        },
        "performance": {
          "description": "Data group containing performance information",
          "$ref": "RS0003.schema.json#/definitions/Performance"
        }
      },
      "required": [
        "performance"
      ],
      "additionalProperties": false
    },
    "Description": {
      "type": "object",
      "properties": {
        "product_information": {
          "description": "Data group describing product information",
          "$ref": "RS0003.schema.json#/definitions/ProductInformation"
        },
        "assembly_components": {
          "description": "An array of components included in the fan assembly air stream",
          "type": "array",
          "items": {
            "$ref": "RS0003.schema.json#/definitions/AssemblyComponent"
          },
          "minItems": 1
        }
      }
    },
    "ProductInformation": {
      "type": "object",
      "properties": {
        "manufacturer": {
          "description": "Name of the assembly/unit manufacturer",
          "type": "string"
        },
        "model_number": {
          "description": "Model number of the assembly / unit",
          "$ref": "ASHRAE205.schema.json#/definitions/Pattern",
          "notes": "Pattern shall match all model numbers that can be represented by the representation"
        },
        "is_enclosed": {
          "description": "Fan assembly is enclosed",
          "type": "boolean",
          "notes": "If true, the performance data reflects the static pressure difference across the enclosure"
        },
        "impeller_type": {
          "$ref": "RS0003.schema.json#/definitions/ImpellerType"
        },
        "has_belt_drive": {
          "description": "The fan impeller is driven by a belt and pulley system",
          "type": "boolean"
        },
        "number_of_impellers": {
          "description": "Number of impellers included in the fan assembly",
          "type": "integer"
        }
      },
      "required": [
        "manufacturer",
        "model_number",
        "is_enclosed"
      ],
      "additionalProperties": false
    },
    "AssemblyComponent": {
      "type": "object",
      "properties": {
        "component_type": {
          "description": "Type of component",
          "$ref": "RS0003.schema.json#/definitions/ComponentType"
        },
        "component_description": {
          "description": "Informative description of the component",
          "type": "string"
        },
        "component_ID": {
          "description": "Identifier of the corresponding Standard 205 representation",
          "$ref": "ASHRAE205.schema.json#/definitions/UUID",
          "notes": "Optionally provided if the component has a Standard 205 representation."
        }
      },
      "required": [
        "component_type"
      ],
      "additionalProperties": false
    },
    "Performance": {
      "type": "object",
      "properties": {
        "nominal_volumetric_air_flow_rate": {
          "description": "Nominal air flow rate for fan assembly",
          "type": "number",
          "minimum": 0,
          "units": "m3/s",
          "notes": "Nominal or rated air flow rate at standard air conditions. Used for calculating wet coil pressure drop."
        },
        "wet_coil_pressure_drop": {
          "description": "Additional static pressure drop if cooling coil component is collecting condensate",
          "type": "number",
          "minimum": 0,
          "units": "Pa",
          "notes": "Corresponds to pressure drop at nominal_volumetric_air_flow_rate. If unknown, a value of 75 Pa shall be used."
        },
        "heat_loss_fraction": {
          "description": "Fraction of efficiency losses added as heat transferred into the air stream",
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "units": "-",
          "notes": "Used to determine amount of heat from the motor added to the air stream."
        },
        "maximum_impeller_speed": {
          "description": "Maximum impeller rotational speed",
          "type": "number",
          "minimum": 0,
          "units": "rev/s"
        },
        "minimum_impeller_speed": {
          "description": "Minimum impeller rotational speed",
          "type": "number",
          "minimum": 0,
          "units": "rev/s",
          "notes": "If no mimumum, use zero."
        },
        "stability_curve": {
          "description": "A description of the stability area for system selection",
          "$ref": "RS0003.schema.json#/definitions/SystemCurve"
        },
        "performance_map_type": {
          "description": "Type of performance map (discrete or continuous)",
          "$ref": "RS0003.schema.json#/definitions/PerformanceMapType"
        },
        "speed_control_type": {
          "description": "Type of fan impeller speed control installed with the fan assembly",
          "$ref": "RS0003.schema.json#/definitions/SpeedControlType"
        },
        "motor_representation": {
          "description": "The corresponding Standard 205 motor representation",
          "notes": "Included if the fan is packaged with a motor. If this is not provided, the fan input power shall represent mechanical shaft power. If this is provided, the input power shall represent either mechanical shaft power or electrical power depending on the data provided by the motor representation.",
          "$ref": "ASHRAE205.schema.json#definitions/ASHRAE205",
          "RS": "RS0005"
        },
        "performance_map": {
          "description": "Data group describing fan performance when operating",
          "oneOf": [
            {
              "$ref": "RS0003.schema.json#/definitions/PerformanceMapContinuous"
            },
            {
              "$ref": "RS0003.schema.json#/definitions/PerformanceMapDiscrete"
            }
          ],
          "notes": "The performance map data group should reflect the type and operation of the fan.\n\nPerformanceMapContinuous describes fan performance in terms of air flow, static pressure, impeller speed, and fan electrical or shaft power.\n\nPerformanceMapDiscrete describes fan performance in terms of speed setting, static pressure, air flow, and power."
        }
      },
      "required": [
        "nominal_volumetric_air_flow_rate",
        "wet_coil_pressure_drop",
        "heat_loss_fraction",
        "maximum_impeller_speed",
        "minimum_impeller_speed",
        "performance_map_type",
        "speed_control_type",
        "performance_map"
      ],
      "additionalProperties": false
    },
    "SystemCurve": {
      "type": "object",
      "properties": {
        "volumetric_air_flow_rate": {
          "description": "Volumetric air flow rate through an air distribution system",
          "type": "array",
          "items": {
            "type": "number",
            "minimum": 0
          },
          "minItems": 2,
          "units": "m3/s"
        },
        "static_pressure_difference": {
          "description": "Static pressure drop of an air distribution system",
          "type": "array",
          "items": {
            "type": "number",
            "minimum": 0
          },
          "minItems": 2,
          "units": "Pa"
        }
      },
      "required": [
        "volumetric_air_flow_rate",
        "static_pressure_difference"
      ],
      "additionalProperties": false
    },
    "PerformanceMapContinuous": {
      "description": "Data group describing fan performance in terms of impeller speed, static pressure, air flow, and fan electrical or shaft power",
      "type": "object",
      "properties": {
        "grid_variables": {
          "description": "Data group describing grid variables for continuous fan performance",
          "$ref": "RS0003.schema.json#/definitions/GridVariablesContinuous"
        },
        "lookup_variables": {
          "description": "Data group describing lookup variables for continuous fan performance",
          "$ref": "RS0003.schema.json#/definitions/LookupVariablesContinuous"
        }
      },
      "required": [
        "grid_variables",
        "lookup_variables"
      ],
      "additionalProperties": false,
      "notes": "Applies for fan assemblies that can operate continuously over a range of shaft speeds."
    },
    "GridVariablesContinuous": {
      "type": "object",
      "properties": {
        "volumetric_air_flow_rate": {
          "description": "Volumetric air flow rate through fan assembly",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "number",
            "minimum": 0
          },
          "units": "m3/s",
          "notes": "At *standard air conditions*."
        },
        "static_pressure_difference": {
          "description": "Static pressure across fan assembly at dry coil conditions",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "number",
            "minimum": 0
          },
          "units": "Pa",
          "notes": "Or external static"
        }
      },
      "required": [
        "volumetric_air_flow_rate",
        "static_pressure_difference"
      ],
      "additionalProperties": false
    },
    "LookupVariablesContinuous": {
      "type": "object",
      "properties": {
        "impeller_speed": {
          "description": "Rotational speed of fan impeller",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": [
              "number",
              "null"
            ],
            "minimum": 0
          },
          "units": "rev/s"
        },
        "input_power": {
          "description": "Power input to fan assembly",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": [
              "number",
              "null"
            ],
            "minimum": 0
          },
          "units": "W",
          "notes": "Mechanical shaft power or electric power depending on the data provided by the motor representation."
        }
      },
      "required": [
        "impeller_speed",
        "input_power"
      ],
      "additionalProperties": false
    },
    "PerformanceMapDiscrete": {
      "description": "Data group describing fan performance in terms of speed setting, static pressure, air flow, and power",
      "type": "object",
      "properties": {
        "grid_variables": {
          "description": "Data group describing grid variables for discrete fan performance",
          "$ref": "RS0003.schema.json#/definitions/GridVariablesDiscrete"
        },
        "lookup_variables": {
          "discription": "Data group describing lookup variables for discrete fan performance",
          "$ref": "RS0003.schema.json#/definitions/LookupVariablesDiscrete"
        }
      },
      "required": [
        "grid_variables",
        "lookup_variables"
      ],
      "additionalProperties": false
    },
    "GridVariablesDiscrete": {
      "type": "object",
      "properties": {
        "speed_number": {
          "description": "Number indicating discrete speed of fan impeller",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "integer",
            "minimum": 0
          },
          "units": "-",
          "notes": "In rank order"
        },
        "static_pressure_difference": {
          "description": "Static pressure across fan assembly at dry coil conditions",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "number",
            "minimum": 0
          },
          "units": "Pa",
          "notes": "Or external static"
        }
      },
      "required": [
        "speed_number",
        "static_pressure_difference"
      ],
      "additionalProperties": false
    },
    "LookupVariablesDiscrete": {
      "type": "object",
      "properties": {
        "volumetric_air_flow_rate": {
          "description": "Volumetric air flow rate through fan assembly",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": [
              "number",
              "null"
            ],
            "minimum": 0
          },
          "units": "m3/s",
          "notes": "At *standard air conditions*."
        },
        "input_power": {
          "description": "Power input to fan assembly",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": [
              "number",
              "null"
            ],
            "minimum": 0
          },
          "units": "W",
          "notes": "Mechanical shaft power or electric power depending on the data provided by the motor representation."
        }
      },
      "required": [
        "volumetric_air_flow_rate",
        "input_power"
      ],
      "additionalProperties": false
    }
  }
}